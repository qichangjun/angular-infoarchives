<div class="anim-slide-left service--watch--wrap">
    <md-content>
        <md-list-item class="md-2-line service--watch--prompt--wrap">
            <div class="md-list-item-text">
                <h3 class="title">服务监控</h3>
                <p class="prompt--content">InfoArchives的服务状态在此显示</p>
            </div>
        </md-list-item>
    </md-content>
    <div class="service--watch--grid">
        <table class="table table-hover service--watch--table">
                <thead>
                <tr class="table__th--tr">
                    <th>ID</th>
                    <th>JOB名称</th>
                    <th>描述</th>
                    <th>启动时间</th>
                    <th>持续运行时间</th>
                    <th >当前状态</th>
                    <th >操作</th>
                </tr>
                </thead>
                <tbody  ng-repeat="data in vm.gridOptions.data">
                    <tr ng-click="vm.checkMission(data,$event);data.showMission=!data.showMission">
                        <td><span class="glyphicon glyphicon-tasks"></span>&nbsp;&nbsp;{{data.id}}</td>
                        <td>{{data.jobName}}</td>
                        <td>{{data.jobDesc}}</td>
                        <td>{{data.startDate | date:'yyyy年MM月dd日 HH:mm:ss'}}</td>
                        <td><span >{{data.keepDay}}天 </span>
                            <span >{{data.keepHour}}小时 </span>
                            <span >{{data.keepMinute}}分 </span>
                        </td>
                        <td>
                            <span ng-if="data.jobStatus == 'PAUSED'"> 服务停止 </span>
                            <span ng-if="data.jobStatus != 'PAUSED'"> 运行正常 </span>
                        </td>
                        <td>
                            <div ng-if="!data.isChanging">
                            <span class="glyphicon glyphicon-play"
                                  style="font-size: 20px"
                                  ng-click="vm.startService(data,$event)"
                                  ng-class="{'button-disabled': data.jobStatus != 'PAUSED'}"
                                    >
                            </span>
                            <span class="glyphicon glyphicon-pause"
                                  style="font-size: 20px"
                                  ng-click="vm.stopService(data,$event)"
                                  ng-class="{'button-disabled': data.jobStatus == 'PAUSED'}"
                                    >
                            </span>
                            </div>
                            <div ng-if="data.isChanging">
                                <md-progress-circular  class="md-hue-2" md-diameter="20px"></md-progress-circular>
                            </div>
                        </td>
                    </tr>
                    <tr class="missionList" ng-show="data.missionList.length > 0 && data.showMission">

                            <!--<td><span>ID：{{missionList.id}}</span></td>-->
                            <!--<td><span>批次号：{{missionList.batchCode}}</span></td>-->
                            <!--<td><span ng-if="missionList.batchStatus==4">任务开始时间：{{missionList.packageAipStartDate | date:'yyyy年MM月dd日 HH:mm:ss'}}</span></td>-->
                            <!--<td><span ng-if="missionList.batchStatus==0">任务开始时间：{{missionList.packageAiuStartDate | date:'yyyy年MM月dd日 HH:mm:ss'}}</span></td>-->
                            <!--<td><span ng-if="missionList.batchStatus==2">任务开始时间：{{missionList.packageSipStartDate | date:'yyyy年MM月dd日 HH:mm:ss'}}</span></td>-->
                            <!--<td><span>数据包熟练：{{missionList.aiu2sipSuccessCount}}</span></td>-->
                            <!--<td><span >进度：-->
                                        <!--<uib-progressbar style="display: inline-block;vertical-align: middle;width: 150px;margin: 0;" class="progress-striped active" type="success" value="(missionList.aiu2sipSuccessCount/missionList.aiuCount)*100"></uib-progressbar>{{(missionList.aiu2sipSuccessCount/missionList.aiuCount)*100}}%-->
                                    <!--</span>-->
                            <!--</td>-->

                        <td colspan="7">
                            <div ng-repeat="missionList in data.missionList" class="mission--list--spread--box">
                                <span class="attr--box">ID：{{missionList.id}}</span>
                                <span class="attr--box"><span translate="MODULES_BATCH_BATCH_NUMBER">批次号</span>：{{missionList.batchCode}}</span>
                                <span class="attr--box date" ng-if="missionList.batchStatus==4">任务开始时间：{{missionList.packageAipStartDate | date:'yyyy.MM.dd HH:mm:ss'}}</span>
                                <span class="attr--box date" ng-if="missionList.batchStatus==0">任务开始时间：{{missionList.packageAiuStartDate | date:'yyyy.MM.dd HH:mm:ss'}}</span>
                                <span class="attr--box date" ng-if="missionList.batchStatus==2">任务开始时间：{{missionList.packageSipStartDate | date:'yyyy.MM.dd HH:mm:ss'}}</span>
                                <span class="attr--box">数据包熟练：{{missionList.aiu2sipSuccessCount}}</span>
                                <span class="attr--box">进度：
                                    <uib-progressbar style="display: inline-block;vertical-align: middle;width:100px;margin: 0;" class="progress-striped active" type="success" value="(missionList.aiu2sipSuccessCount/missionList.aiuCount)*100"></uib-progressbar>{{(missionList.aiu2sipSuccessCount/missionList.aiuCount)*100}}%
                                </span>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        <div class="service--watch--grid__prompt--box">
            <div class="prompt--content">
                <span class="fa fa-exclamation-circle"></span>
                <span>目前每个服务下只能运行一个任务，攻城狮正在全力开发多任务</span>
            </div>
            <div class="prompt--content">
                <span class="fa fa-exclamation-circle"></span>
                <span>此处只显示正在运行的任务，已完成的任务记录请进入<a ui-sref="infoArchives.batch">数据批次</a>查看</span>
            </div>
        </div>
    </div>
</div>


